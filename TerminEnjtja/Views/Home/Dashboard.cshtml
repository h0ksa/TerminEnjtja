<!-- Views/Home/Dashboard.cshtml -->
@model DashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
}

<div class="status-bar">
    <div class="status-item">
        <i class="fas fa-user"></i>
        Status: <span class="badge @(Model.IsAdmin ? "badge-admin" : "badge-viewer")">@(Model.IsAdmin ? "Admin" : "Viewer")</span>
    </div>
    <div class="status-item">
        <a asp-action="Logout" class="btn btn-danger">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>
</div>

<h2><i class="fas fa-calendar-alt"></i> Ndeshjet</h2>

@if (Model.IsAdmin)
{
    <div id="adminControls">
        <div class="actions">
            <a asp-action="AddMatch" class="btn btn-primary">
                <i class="fas fa-plus"></i> Add New Match
            </a>
        </div>
    </div>
}

<div class="table-responsive">
    @if (Model.Matches.Any())
    {
        <table id="matchesTable" class="table">
            <thead>
                <tr>
                    <th><i class="fas fa-calendar"></i> Date</th>
                    <th>ACI</th>
                    <th>Score</th>
                    <th>BESI</th>
                    <th><i class="fas fa-comment"></i> Notes</th>
                    @if (Model.IsAdmin)
                    {
                        <th><i class="fas fa-cog"></i> Actions</th>
                    }
                </tr>
            </thead>
            <tbody>
                @foreach (var match in Model.Matches)
                {
                    <tr>
                        <td>@match.Date.ToString("dd/MM/yyyy")</td>
                        <td>ACI</td>
                        <td class="score @(match.TeamAScore > match.TeamBScore ? "winner" : (match.TeamAScore < match.TeamBScore ? "draw" : ""))">
                            @match.TeamAScore - @match.TeamBScore
                        </td>
                        <td>BESI</td>
                        <td>@(string.IsNullOrEmpty(match.Notes) ? "-" : match.Notes)</td>
                        @if (Model.IsAdmin)
                        {
                            <td>
                                <form asp-action="DeleteMatch" method="post">
                                    <input type="hidden" name="id" value="@match.Id" />
                                    <button type="submit" class="btn btn-danger action-btn"
                                            onclick="return confirm('Are you sure you want to delete this match?')">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </form>
                            </td>
                        }
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="no-matches">
            <i class="fas fa-info-circle"></i> No matches have been recorded yet.
        </div>
    }
</div>